CREATE DATABASE poll_quest;

CREATE TABLE polls (
	id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	name VARCHAR(128) NOT NULL,
	link VARCHAR(128) NOT NULL UNIQUE
);

CREATE TABLE questions (
	id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	text VARCHAR(256) NOT NULL
);

CREATE TABLE polls_questions (
	id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	pollID INT UNSIGNED NOT NULL,
	questionID INT UNSIGNED NOT NULL,
	FOREIGN KEY(pollID) REFERENCES polls(id) ON DELETE CASCADE,
	FOREIGN KEY(questionID) REFERENCES questions(id) ON DELETE CASCADE
);

CREATE TABLE responses (
	id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	text VARCHAR(256) NOT NULL,
	questionID INT UNSIGNED NOT NULL,
	FOREIGN KEY(questionID) REFERENCES questions(id) ON DELETE CASCADE
);